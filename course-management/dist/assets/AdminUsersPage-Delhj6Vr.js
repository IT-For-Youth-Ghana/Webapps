import{_ as rt,g as a,h as m,c as i,a as t,j as C,t as n,q as d,v as k,s as y,b as vt,F as x,f as P,d as F,A as B,m as G,i as u,x as ct,n as E}from"./index-CP_3XprM.js";import"pinia";const pt={class:"admin-users"},mt={class:"page-header"},bt={class:"header-actions"},gt={class:"user-stats"},ft={class:"stat-card"},ht={class:"stat-content"},Ct={class:"stat-value"},Ut={class:"stat-card"},kt={class:"stat-content"},yt={class:"stat-value"},wt={class:"stat-card"},_t={class:"stat-content"},St={class:"stat-value"},It={class:"stat-card"},At={class:"stat-content"},Mt={class:"stat-value"},Vt={class:"filters-section"},$t={class:"search-bar"},xt={class:"filters"},Pt=["value"],Rt={class:"users-table"},Dt={class:"table-header"},Lt={class:"table-actions"},Nt={class:"table-container"},Ft={class:"users-table-content"},Bt=["value"],Et={class:"user-info"},jt={class:"user-avatar"},Tt=["src","alt"],qt={class:"user-details"},Gt={class:"user-name"},Kt={class:"user-email"},zt={class:"user-id"},Jt={class:"institution-cell"},Ot={class:"last-login"},Qt={class:"actions-cell"},Yt={class:"action-buttons"},Ht=["onClick"],Wt=["onClick"],Xt=["onClick"],Zt=["onClick","title"],te={class:"pagination"},ee=["disabled"],se={class:"pagination-info"},le=["disabled"],ne={class:"modal-header"},oe={class:"modal-content"},ae={class:"form-grid"},ie={class:"form-group"},ue={class:"form-group"},de={class:"form-group"},re={class:"form-group"},ve=["value"],ce={class:"form-group"},pe={class:"form-group"},me={class:"registration-options"},be={class:"radio-label"},ge={class:"radio-label"},fe={class:"radio-label"},he={key:0,class:"form-group"},Ce={class:"code-input"},Ue={class:"modal-footer"},ke={class:"modal-header"},ye={class:"modal-content"},we={class:"file-upload"},_e={key:0,class:"import-preview"},Se={class:"preview-table"},Ie={key:0,class:"preview-more"},Ae={class:"modal-footer"},Me=["disabled"],Ve={__name:"AdminUsersPage",setup($e){const w=a(""),_=a(""),S=a(""),I=a(""),r=a([]),b=a(1),R=a(10),A=a(!1),g=a(!1),f=a(null),D=a(""),c=a([]),o=a({name:"",email:"",role:"student",institutionId:"",phone:"",registrationMethod:"email"}),p=a([{id:"USR001",name:"Kwame Asante",email:"kwame.asante@email.com",role:"student",institutionId:1,status:"active",lastLogin:new Date(Date.now()-7200*1e3),avatar:"https://picsum.photos/seed/user1/100/100.jpg"},{id:"USR002",name:"Dr. Yaa Boahene",email:"yaa.boahene@university.edu",role:"teacher",institutionId:1,status:"active",lastLogin:new Date(Date.now()-1800*1e3),avatar:"https://picsum.photos/seed/user2/100/100.jpg"},{id:"USR003",name:"Joseph Osei",email:"joseph.osei@admin.com",role:"admin",institutionId:2,status:"active",lastLogin:new Date(Date.now()-3600*1e3),avatar:"https://picsum.photos/seed/user3/100/100.jpg"},{id:"USR004",name:"Ama Serwaa",email:"ama.serwaa@student.com",role:"student",institutionId:1,status:"pending",lastLogin:null,avatar:"https://picsum.photos/seed/user4/100/100.jpg"}]),L=a([{id:1,name:"University of Ghana"},{id:2,name:"Kwame Nkrumah University"},{id:3,name:"University of Cape Coast"}]),K=m(()=>p.value.filter(l=>l.role==="teacher").length),z=m(()=>p.value.filter(l=>l.role==="student").length),J=m(()=>p.value.filter(l=>l.role==="admin").length),O=m(()=>p.value.filter(l=>l.status==="pending").length),U=m(()=>{let l=p.value;if(w.value){const e=w.value.toLowerCase();l=l.filter(s=>s.name.toLowerCase().includes(e)||s.email.toLowerCase().includes(e)||s.id.toLowerCase().includes(e))}return _.value&&(l=l.filter(e=>e.role===_.value)),S.value&&(l=l.filter(e=>e.status===S.value)),I.value&&(l=l.filter(e=>e.institutionId===parseInt(I.value))),l}),j=m(()=>Math.ceil(U.value.length/R.value)),T=m(()=>{const l=(b.value-1)*R.value,e=l+R.value;return U.value.slice(l,e)}),Q=l=>l.charAt(0).toUpperCase()+l.slice(1),Y=l=>l.charAt(0).toUpperCase()+l.slice(1),H=l=>{const e=L.value.find(s=>s.id===l);return e?e.name:"N/A"},W=l=>{if(!l)return"Never";const s=new Date-l,v=Math.floor(s/(1e3*60)),N=Math.floor(s/(1e3*60*60)),h=Math.floor(s/(1e3*60*60*24));return v<60?`${v}m ago`:N<24?`${N}h ago`:`${h}d ago`},X=()=>{r.value.length>0?r.value=[]:r.value=U.value.map(l=>l.id)},Z=l=>{l.target.checked?r.value=T.value.map(e=>e.id):r.value=[]},tt=l=>{console.log(`Performing ${l} on users:`,r.value),r.value=[],alert(`Bulk ${l} completed successfully!`)},et=l=>{console.log("Viewing user:",l)},st=l=>{f.value=l,o.value={...l},A.value=!0},lt=l=>{console.log("Resetting password for:",l.email),alert(`Password reset email sent to ${l.email}`)},nt=l=>{const e=l.status==="active"?"suspended":"active";l.status=e,alert(`User ${e==="active"?"activated":"suspended"} successfully!`)},ot=()=>{D.value=Math.random().toString(36).substring(2,10).toUpperCase()},M=()=>{A.value=!1,f.value=null,o.value={name:"",email:"",role:"student",institutionId:"",phone:"",registrationMethod:"email"}},at=()=>{if(f.value){const l=p.value.findIndex(e=>e.id===f.value.id);p.value[l]={...p.value[l],...o.value},alert("User updated successfully!")}else{const l={id:"USR"+String(Date.now()).slice(-3),...o.value,status:"active",lastLogin:null,avatar:`https://picsum.photos/seed/user${Date.now()}/100/100.jpg`};p.value.push(l),alert("User created successfully!")}M()},it=()=>{console.log("Exporting users..."),alert("User data exported successfully!")},ut=l=>{const e=l.target.files[0];if(e){const s=new FileReader;s.onload=v=>{const h=v.target.result.split(`
`);h[0].split(",");const q=[];for(let V=1;V<Math.min(h.length,101);V++)if(h[V].trim()){const $=h[V].split(",");q.push({name:$[0],email:$[1],role:$[2],institution:$[3]})}c.value=q},s.readAsText(e)}},dt=()=>{console.log("Processing bulk import:",c.value),alert(`Successfully imported ${c.value.length} users!`),g.value=!1,c.value=[]};return(l,e)=>(u(),i("div",pt,[t("div",mt,[e[25]||(e[25]=t("div",{class:"header-content"},[t("h1",{class:"page-title"},"User Management"),t("p",{class:"page-subtitle"},"Manage teachers, students, and admin accounts")],-1)),t("div",bt,[t("button",{class:"btn btn-secondary",onClick:it}," Export Users "),t("button",{class:"btn btn-secondary",onClick:e[0]||(e[0]=s=>g.value=!0)}," Bulk Import "),t("button",{class:"btn btn-primary",onClick:e[1]||(e[1]=s=>A.value=!0)}," Add User ")])]),t("div",gt,[t("div",ft,[e[27]||(e[27]=t("div",{class:"stat-icon teachers"},null,-1)),t("div",ht,[t("div",Ct,n(K.value),1),e[26]||(e[26]=t("div",{class:"stat-label"},"Teachers",-1))])]),t("div",Ut,[e[29]||(e[29]=t("div",{class:"stat-icon students"},null,-1)),t("div",kt,[t("div",yt,n(z.value),1),e[28]||(e[28]=t("div",{class:"stat-label"},"Students",-1))])]),t("div",wt,[e[31]||(e[31]=t("div",{class:"stat-icon admins"},null,-1)),t("div",_t,[t("div",St,n(J.value),1),e[30]||(e[30]=t("div",{class:"stat-label"},"Admins",-1))])]),t("div",It,[e[33]||(e[33]=t("div",{class:"stat-icon pending"},null,-1)),t("div",At,[t("div",Mt,n(O.value),1),e[32]||(e[32]=t("div",{class:"stat-label"},"Pending",-1))])])]),t("div",Vt,[t("div",$t,[d(t("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=s=>w.value=s),placeholder:"Search users by name, email, or ID...",class:"search-input"},null,512),[[k,w.value]])]),t("div",xt,[d(t("select",{"onUpdate:modelValue":e[3]||(e[3]=s=>_.value=s),class:"filter-select"},[...e[34]||(e[34]=[t("option",{value:""},"All Roles",-1),t("option",{value:"student"},"Students",-1),t("option",{value:"teacher"},"Teachers",-1),t("option",{value:"admin"},"Admins",-1)])],512),[[y,_.value]]),d(t("select",{"onUpdate:modelValue":e[4]||(e[4]=s=>S.value=s),class:"filter-select"},[...e[35]||(e[35]=[vt('<option value="" data-v-2b4cf43c>All Status</option><option value="active" data-v-2b4cf43c>Active</option><option value="inactive" data-v-2b4cf43c>Inactive</option><option value="pending" data-v-2b4cf43c>Pending</option><option value="suspended" data-v-2b4cf43c>Suspended</option>',5)])],512),[[y,S.value]]),d(t("select",{"onUpdate:modelValue":e[5]||(e[5]=s=>I.value=s),class:"filter-select"},[e[36]||(e[36]=t("option",{value:""},"All Institutions",-1)),(u(!0),i(x,null,P(L.value,s=>(u(),i("option",{key:s.id,value:s.id},n(s.name),9,Pt))),128))],512),[[y,I.value]])])]),t("div",Rt,[t("div",Dt,[t("h3",null,n(U.value.length)+" Users",1),t("div",Lt,[t("button",{class:"btn btn-sm btn-secondary",onClick:X},n(r.value.length>0?"Deselect All":"Select All"),1),r.value.length>0?(u(),i("button",{key:0,class:"btn btn-sm btn-warning",onClick:e[6]||(e[6]=s=>tt("suspend"))}," Suspend Selected ("+n(r.value.length)+") ",1)):C("",!0)])]),t("div",Nt,[t("table",Ft,[t("thead",null,[t("tr",null,[t("th",null,[t("input",{type:"checkbox",onChange:Z},null,32)]),e[37]||(e[37]=t("th",null,"User",-1)),e[38]||(e[38]=t("th",null,"Role",-1)),e[39]||(e[39]=t("th",null,"Institution",-1)),e[40]||(e[40]=t("th",null,"Status",-1)),e[41]||(e[41]=t("th",null,"Last Login",-1)),e[42]||(e[42]=t("th",null,"Actions",-1))])]),t("tbody",null,[(u(!0),i(x,null,P(T.value,s=>(u(),i("tr",{key:s.id,class:"user-row"},[t("td",null,[d(t("input",{type:"checkbox",value:s.id,"onUpdate:modelValue":e[7]||(e[7]=v=>r.value=v)},null,8,Bt),[[ct,r.value]])]),t("td",Et,[t("div",jt,[t("img",{src:s.avatar,alt:s.name},null,8,Tt)]),t("div",qt,[t("div",Gt,n(s.name),1),t("div",Kt,n(s.email),1),t("div",zt,"ID: "+n(s.id),1)])]),t("td",null,[t("span",{class:E(["role-badge",s.role])},n(Q(s.role)),3)]),t("td",Jt,n(H(s.institutionId)),1),t("td",null,[t("span",{class:E(["status-badge",s.status])},n(Y(s.status)),3)]),t("td",Ot,n(W(s.lastLogin)),1),t("td",Qt,[t("div",Yt,[t("button",{class:"action-btn",onClick:v=>et(s),title:"View Details"}," View ",8,Ht),t("button",{class:"action-btn",onClick:v=>st(s),title:"Edit User"}," Edit ",8,Wt),t("button",{class:"action-btn",onClick:v=>lt(s),title:"Reset Password"}," Reset ",8,Xt),t("button",{class:E(["action-btn",s.status==="active"?"warning":"success"]),onClick:v=>nt(s),title:s.status==="active"?"Suspend User":"Activate User"},n(s.status==="active"?"Suspend":"Activate"),11,Zt)])])]))),128))])])]),t("div",te,[t("button",{class:"pagination-btn",onClick:e[8]||(e[8]=s=>b.value--),disabled:b.value===1}," Previous ",8,ee),t("span",se," Page "+n(b.value)+" of "+n(j.value)+" ("+n(U.value.length)+" users) ",1),t("button",{class:"pagination-btn",onClick:e[9]||(e[9]=s=>b.value++),disabled:b.value===j.value}," Next ",8,le)])]),A.value?(u(),i("div",{key:0,class:"modal-overlay",onClick:M},[t("div",{class:"modal",onClick:e[19]||(e[19]=G(()=>{},["stop"]))},[t("div",ne,[t("h2",null,n(f.value?"Edit User":"Create New User"),1),t("button",{class:"btn btn-ghost btn-sm",onClick:M},"Close")]),t("div",oe,[t("div",ae,[t("div",ie,[e[43]||(e[43]=t("label",{class:"form-label"},"Full Name",-1)),d(t("input",{type:"text","onUpdate:modelValue":e[10]||(e[10]=s=>o.value.name=s),class:"form-input"},null,512),[[k,o.value.name]])]),t("div",ue,[e[44]||(e[44]=t("label",{class:"form-label"},"Email",-1)),d(t("input",{type:"email","onUpdate:modelValue":e[11]||(e[11]=s=>o.value.email=s),class:"form-input"},null,512),[[k,o.value.email]])]),t("div",de,[e[46]||(e[46]=t("label",{class:"form-label"},"Role",-1)),d(t("select",{"onUpdate:modelValue":e[12]||(e[12]=s=>o.value.role=s),class:"form-select"},[...e[45]||(e[45]=[t("option",{value:"student"},"Student",-1),t("option",{value:"teacher"},"Teacher",-1),t("option",{value:"admin"},"Admin",-1)])],512),[[y,o.value.role]])]),t("div",re,[e[48]||(e[48]=t("label",{class:"form-label"},"Institution",-1)),d(t("select",{"onUpdate:modelValue":e[13]||(e[13]=s=>o.value.institutionId=s),class:"form-select"},[e[47]||(e[47]=t("option",{value:""},"Select Institution",-1)),(u(!0),i(x,null,P(L.value,s=>(u(),i("option",{key:s.id,value:s.id},n(s.name),9,ve))),128))],512),[[y,o.value.institutionId]])])]),t("div",ce,[e[49]||(e[49]=t("label",{class:"form-label"},"Phone Number",-1)),d(t("input",{type:"tel","onUpdate:modelValue":e[14]||(e[14]=s=>o.value.phone=s),class:"form-input"},null,512),[[k,o.value.phone]])]),t("div",pe,[e[53]||(e[53]=t("label",{class:"form-label"},"Registration Method",-1)),t("div",me,[t("label",be,[d(t("input",{type:"radio",value:"email","onUpdate:modelValue":e[15]||(e[15]=s=>o.value.registrationMethod=s)},null,512),[[B,o.value.registrationMethod]]),e[50]||(e[50]=F(" Email Invitation ",-1))]),t("label",ge,[d(t("input",{type:"radio",value:"code","onUpdate:modelValue":e[16]||(e[16]=s=>o.value.registrationMethod=s)},null,512),[[B,o.value.registrationMethod]]),e[51]||(e[51]=F(" Registration Code ",-1))]),t("label",fe,[d(t("input",{type:"radio",value:"manual","onUpdate:modelValue":e[17]||(e[17]=s=>o.value.registrationMethod=s)},null,512),[[B,o.value.registrationMethod]]),e[52]||(e[52]=F(" Manual Creation ",-1))])])]),o.value.registrationMethod==="code"?(u(),i("div",he,[e[54]||(e[54]=t("label",{class:"form-label"},"Registration Code",-1)),t("div",Ce,[d(t("input",{type:"text","onUpdate:modelValue":e[18]||(e[18]=s=>D.value=s),class:"form-input",readonly:""},null,512),[[k,D.value]]),t("button",{class:"btn btn-secondary btn-sm",onClick:ot},"Generate New")])])):C("",!0)]),t("div",Ue,[t("button",{class:"btn btn-secondary",onClick:M},"Cancel"),t("button",{class:"btn btn-primary",onClick:at},n(f.value?"Update User":"Create User"),1)])])])):C("",!0),g.value?(u(),i("div",{key:1,class:"modal-overlay",onClick:e[24]||(e[24]=s=>g.value=!1)},[t("div",{class:"modal",onClick:e[23]||(e[23]=G(()=>{},["stop"]))},[t("div",ke,[e[55]||(e[55]=t("h2",null,"Bulk Import Users",-1)),t("button",{class:"btn btn-ghost btn-sm",onClick:e[20]||(e[20]=s=>g.value=!1)},"Close")]),t("div",ye,[e[57]||(e[57]=t("div",{class:"import-instructions"},[t("h3",null,"Import Instructions"),t("ul",null,[t("li",null,"Upload a CSV file with columns: name, email, role, institution"),t("li",null,"First row should contain headers"),t("li",null,"Maximum 1000 users per import"),t("li",null,"Duplicate emails will be skipped")])],-1)),t("div",we,[t("input",{type:"file",ref:"csvFile",accept:".csv",onChange:ut},null,544),t("button",{class:"btn btn-secondary",onClick:e[21]||(e[21]=s=>l.$refs.csvFile.click())}," Choose CSV File ")]),c.value.length>0?(u(),i("div",_e,[t("h4",null,"Preview ("+n(c.value.length)+" users)",1),t("div",Se,[t("table",null,[e[56]||(e[56]=t("thead",null,[t("tr",null,[t("th",null,"Name"),t("th",null,"Email"),t("th",null,"Role"),t("th",null,"Institution")])],-1)),t("tbody",null,[(u(!0),i(x,null,P(c.value.slice(0,5),(s,v)=>(u(),i("tr",{key:v},[t("td",null,n(s.name),1),t("td",null,n(s.email),1),t("td",null,n(s.role),1),t("td",null,n(s.institution),1)]))),128))])]),c.value.length>5?(u(),i("div",Ie," ...and "+n(c.value.length-5)+" more users ",1)):C("",!0)])])):C("",!0)]),t("div",Ae,[t("button",{class:"btn btn-secondary",onClick:e[22]||(e[22]=s=>g.value=!1)},"Cancel"),t("button",{class:"btn btn-primary",onClick:dt,disabled:c.value.length===0}," Import "+n(c.value.length)+" Users ",9,Me)])])])):C("",!0)]))}},Re=rt(Ve,[["__scopeId","data-v-2b4cf43c"]]);export{Re as default};
